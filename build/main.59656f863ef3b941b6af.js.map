{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./templates/ImageCard.hbs"],"names":["apiService","inputValue","markup","searchQuery","fetch","then","response","json","obj","hits","catch","error","console","log","body","document","querySelector","page","topPosition","insertAdjacentHTML","refs","galleryContainer","searchForm","request","updateImagesMarkup","images","length","Toastr","ImageCard","window","scrollTo","left","top","behavior","addEventListener","debounce","event","preventDefault","elements","query","value","innerHTML","timeout","button","scrollHeight","offsetHeight","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.59656f863ef3b941b6af.js","sourcesContent":["function apiService(searchQuery) {\r\n  return (\r\n    fetch(searchQuery)\r\n      .then(response => response.json())\r\n      .then(obj => obj.hits)\r\n      .catch(error => console.log('ERROR!!!'))\r\n  );\r\n}\r\n\r\nexport default apiService;\r\n","import './styles.css';\r\nimport debounce from 'lodash.debounce';\r\nimport apiService from './js/apiService';\r\nimport ImageCard from './templates/ImageCard.hbs';\r\nimport * as Toastr from 'toastr';\r\nimport '../node_modules/toastr/build/toastr.css';\r\n\r\nconst body = document.querySelector('body');\r\nlet page = 1;\r\nconst baseUrl = 'https://pixabay.com/';\r\nconst keyAPI = '19750325-769cba3e08dc3fabd5e207521';\r\nlet inputValue;\r\nlet markup;\r\nlet topPosition = 0;\r\n\r\nbody.insertAdjacentHTML(\r\n  'beforeend',\r\n  '<form class=\"search-form\" id=\"search-form\"><input type = \"text\" name = \"query\" autocomplete = \"off\" placeholder = \"Search images...\"/></form><ul class=\"gallery\"></ul>',\r\n);\r\n\r\nconst refs = {\r\n  galleryContainer: body.querySelector('.gallery'),\r\n  searchForm: body.querySelector('#search-form'),\r\n};\r\n\r\nfunction request() {\r\n  return `api/?image_type=photo&orientation=horizontal&q=${inputValue}&page=${page}&per_page=12&key=${keyAPI}`;\r\n}\r\nrefs.searchForm.addEventListener('input', debounce(inputSearch, 500));\r\nfunction inputSearch(event) {\r\n  event.preventDefault();\r\n  page = 1;\r\n  topPosition = 0;\r\n  inputValue = refs.searchForm.elements.query.value;\r\n  request();\r\n  refs.galleryContainer.innerHTML = '';\r\n  apiService(baseUrl + request()).then(updateImagesMarkup);\r\n  return inputValue;\r\n}\r\n\r\nToastr.options.timeout = 1000; //Change the settings\r\n\r\nfunction updateImagesMarkup(images) {\r\n  if (images.length === 0) {\r\n    Toastr.error('по вашему запросу ничего не найдено');\r\n  }\r\n  markup = ImageCard(images);\r\n  refs.galleryContainer.insertAdjacentHTML('beforeend', markup);\r\n  window.scrollTo({\r\n    left: 0,\r\n    top: topPosition,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\nbody.insertAdjacentHTML(\r\n  'beforeend',\r\n  '<button class=\"button\">Load more</button>',\r\n);\r\nconst button = body.querySelector('.button');\r\nbutton.addEventListener('click', pageValue);\r\nfunction pageValue() {\r\n  page += 1;\r\n  apiService(baseUrl + request()).then(updateImagesMarkup);\r\n  console.log(refs.galleryContainer.scrollHeight);\r\n  console.log(button.offsetHeight);\r\n  topPosition = refs.galleryContainer.scrollHeight + button.offsetHeight;\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <a href=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":3,\"column\":29}}}) : helper)))\n    + \" target=\\\"blank\\\">\\r\\n        <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":17},\"end\":{\"line\":4,\"column\":33}}}) : helper)))\n    + \" width=\\\"480\\\" height=\\\"320\\\" alt=\\\"#\\\" />\\r\\n    </a>\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":12},\"end\":{\"line\":9,\"column\":21}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":12},\"end\":{\"line\":13,\"column\":21}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":12},\"end\":{\"line\":17,\"column\":24}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":12},\"end\":{\"line\":21,\"column\":25}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":25,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}